document.addEventListener("DOMContentLoaded",function(){new class{constructor(){this.playBtn=document.querySelector(".audio-player__play"),this.range=document.querySelector(".audio-player__range"),this.rangeDecor=document.querySelector(".audio-player__range-decor"),this.playlist=document.querySelector(".player__playlist"),this.trackTitle=document.querySelector(".player__titles .player__track"),this.nextBtn=document.querySelector(".audio-player__next"),this.prevBtn=document.querySelector(".audio-player__prev"),this.tracks=this.getAllTracks(),this.renderPlaylist(),this.audio=new Audio("assets/audio/come-along.mp3"),this.activeTrack=this.getActiveTrack(),this.playlistItems=document.querySelectorAll(".player__playlist-item"),this.playlistBtns=document.querySelectorAll(".player__play-btn"),this.addHandlerForPlayButton(),this.addHandlerForPlaylist(),this.addHandlerForAudioRange(),this.addHandlerForNextButton(),this.addHandlerForPrevButton(),this.changeActivePlaylistItem(this.activeTrack.name)}buildListItemHTML(t,e,a,i,s){return`<li class="player__playlist-item" data-name="${t}">\n        <button class="player__play-btn ${s?"active":""}"></button>\n        <span class="player__track">${this.padZero(i)}. ${e}</span>\n        <span class="player__track-time">${a}</span>\n      </li>`}padZero(t){return t<10?`0${t}`:t}getAllTracks(){return[{name:"come-along",text:"come along",active:!0},{name:"put-it-on-me",text:"Put it on me"},{name:"cold-cold-cold",text:"cold cold cold"},{name:"darkside",text:"darkside"},{name:"out-of-black",text:"out of black"},{name:"overdose",text:"overdose"},{name:"feeling-good",text:"feeling good"},{name:"everything-black",text:"everything black"},{name:"blood-water",text:"blood // water"}]}renderPlaylist(){this.playlist.innerHTML=this.tracks.map((t,e)=>this.buildListItemHTML(t.name,t.text,`${Math.floor(3*Math.random()+2)}:${this.padZero(Math.floor(60*Math.random()))}`,e+1,t.active)).join("")}getActiveTrack(){return this.tracks.find(t=>t.active)}addHandlerForNextButton(){this.nextBtn.onclick=(()=>{const t=this.tracks.findIndex(t=>t.name==this.activeTrack.name);t+1===this.tracks.length?this.changeActivePlaylistItem(this.tracks[0].name):this.changeActivePlaylistItem(this.tracks[t+1].name)})}addHandlerForPrevButton(){this.prevBtn.onclick=(()=>{const t=this.tracks.findIndex(t=>t.name==this.activeTrack.name);0===t?this.changeActivePlaylistItem(this.tracks[this.tracks.length-1].name):this.changeActivePlaylistItem(this.tracks[t-1].name)})}addHandlerForPlaylist(){this.playlist.onclick=(t=>{const e=t.target.closest(".player__playlist-item").dataset.name;this.changeActivePlaylistItem(e)})}addHandlerForAudioRange(){this.range.onchange=(()=>{this.audio.currentTime=this.range.value}),this.audio.addEventListener("timeupdate",()=>{let t=parseInt(this.audio.currentTime,10);t+1>this.audio.duration?this.rangeDecor.slyle.width="100%":this.rangeDecor.style.width=`${t/this.audio.duration*100+.5}%`,this.range.value=this.audio.currentTime})}addHandlerForPlayButton(){this.playBtn.onclick=(()=>{document.querySelector(".pause")?(this.audio.pause(),this.playBtn.classList.remove("pause")):(this.audio.play(),this.range.setAttribute("max",this.audio.duration),this.playBtn.classList.add("pause"))})}changeActivePlaylistItem(t){this.tracks=this.tracks.map(e=>({...e,active:e.name===t})),this.activeTrack=this.getActiveTrack(),this.changeActivePlaylistBtn(),this.reloadAudio(),this.changeTrack()}changeActivePlaylistBtn(){this.playlistBtns.forEach(t=>t.classList.remove("active")),[...this.playlistItems].find(t=>t.dataset.name===this.activeTrack.name).querySelector(".player__play-btn").classList.add("active")}changeTrack(){this.audio.pause(),this.trackTitle.textContent=this.activeTrack.text,this.audio.setAttribute("src",`assets/audio/${this.activeTrack.name}.mp3`)}reloadAudio(){this.playBtn.classList.remove("pause"),this.rangeDecor.style.width="0%",this.audio.load()}};new Rellax(".rellax");const t=new Swiper(".about__swiper",{loop:!0,speed:1500,parallax:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});let e=document.querySelectorAll(".about__item");const a=[...e];t.on("slideChange",function(){setTimeout(()=>{e.forEach(t=>t.classList.remove("active"));const t=document.querySelector(".swiper-slide-active").getAttribute("data-swiper-slide-index");a[t].classList.add("active")},100)});new Swiper(".dots-slider",{loop:!1,speed:500,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{0:{slidesPerView:3,spaceBetween:40,initialSlide:5},500:{slidesPerView:5,spaceBetween:40,initialSlide:3},770:{slidesPerView:7,spaceBetween:32,initialSlide:3},1100:{slidesPerView:7,spaceBetween:10,initialSlide:1},1600:{slidesPerView:10,spaceBetween:10,initialSlide:1}}})});